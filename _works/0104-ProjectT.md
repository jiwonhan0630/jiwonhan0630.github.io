---
layout: basic
title: "Project T"
description: "2D 퍼즐 플랫포머"
tags:
    - PC
    - UnityEngine
---

# 담당 업무
- [기상 상호작용 시스템](#기상-상호작용-시스템)
- [동적 NPC 보이스 출력](#동적-npc-보이스-출력)
- [대화 이벤트 기반 퀘스트 시스템](#대화-이벤트-기반-퀘스트-시스템)
- UI 시스템
    - 계층형 UI 구조 설계, UGUI Navigation 적용
- 플레이어 컨트롤
- 스킬 시스템
- 퍼즐

# 세부 내용

## 플레이어 컨트롤
**기본 동작**: 이동, 점프, 사다리타기 등 기본 동작을 구현하였습니다.  
**추가 동작**: 오브젝트 들기, 퍼즐 상호작용, 스킬을 통한 이동 등 추가 동작을 구현하였습니다.  

### 기상 상호작용 시스템
인터페이스 및 옵저버 패턴 기반의 기상 상호작용 시스템을 설계하였습니다.  
IWeatherReactable 인터페이스를 통해 상호작용 규격을 추상화하고, 기상 변화 시에만 인터페이스 호출을 통해 상태를 갱신하도록 하였습니다.  
- **수위 변경 및 식물 성장**
    - 비에 노출된 시간에 따라 BuoyancyEffector를 통해 물 오브젝트의 수위가 변경되도록 구현하였습니다.  
    - 식물 오브젝트의 GrowthStage를 인터페이스 메서드로 분리하여 비에 맞으면 자발적 성장하도록 구현하였습니다.  
- **바람 및 불 전파**
    - 날씨 상태에 따라 AreaEffector를 통해 오브젝트를 이동시킴
    - 불 오브젝트가 AreaEffector의 방향 및 세기에 따라 다른 오브젝트에 전파되도록 구현하였습니다.  

### 스킬 시스템
**오브젝트 상호작용**: 플레이어의 스킬에 따라, 선택한 오브젝트에 날씨와 같은 영향을 줄 수 있도록 구현하였습니다.  
**스킬 해금**: 퀘스트의 완료에 따라 스킬을 해금할 수 있도록 하였습니다...  

## 대화 이벤트 기반 퀘스트 시스템
NPC와의 대화 시작, 종료, 혹은 특정 대사 출력을 퀘스트의 완료나 실패 조건으로 설정할 수 있는  
이벤트 기반 퀘스트 시스템을 구현하였습니다.  

## 동적 NPC 보이스 출력
설정된 감정 상태와 문장 부호에 따라 피치와 속도, 볼륨이 변조된 사운드를 출력하는 기능을 구현하였습니다.  

### NPC
**감정 기반 동적 보이스 출력**: 설정된 감정 상태와 문장 부호에 따라 피치와 속도, 볼륨이 변조된 사운드를 출력하는 기능을 구현하였습니다.  

### 기타
**UGUI Navigation**: 키보드만으로 UI의 조작이 가능하도록 설계  
**대화 시스템**: CSV 파일을 통해 NPC와의 대화 및 퀘스트 이벤트를 설정할 수 있는 시스템 구현  

# Troubleshooting
## 문제 상황
불이 안번짐...  

## 원인 파악
오브젝트에 콜라이더를 넣고, OnTriggerStay를 통해 닿아있는 오브젝트의 타이머를 체크하여 일정 시간이 지나면 불이 옮겨붙게 설계하였음  
근데 애매하게 걸쳐있는 오브젝트는 닿았다 떼어졌다를 반복하니 타이머 방식은 쓸수가 없ㅅ엇음  

## 문제 해결
타이머 제거  
Burn Intensity가 특정 수치 이상일 경우 전파 기능이 활성화되어 FixedUpdate때 주변 오브젝트의 Burn Intensity를 증가시키는 함수가 호출됨  


## 결과
불이 잘 번짐...  
기상 시스템이랑 연동해서 비가 오거나 바람이 불 때 BurnIntensity를 조절하여 불이 번지는 속도같은걸 조절할 수 있게됨  


- 스킬 시스템
    - 물, 번개, 바람 스킬 기능 구현
    - 식물, 기계 속성 오브젝트와의 상호작용 기능 구현
- NPC
    - 대화 시 보이스 출력 구현
    - 대화를 통한 퀘스트 진행 구현
- 퀘스트 시스템
    - NPC와의 대화를 통한 수령/완수 구현
    - 대화 시스템을 통해 대화 시작, 대화 중, 대화 끝 세가지의 퀘스트 관련 검사 구현
- 대화 시스템
    - NPC와의 대화 기능 구현
    - CSV확장자의 대화 시스템 양식 제작
        - NPC 이름, 대사 출력
        - 각각의 보이스 출력
- UI 기능 구현
    - 인게임 UI 기능 전반 구현
        - 키보드만 사용해도 모든 UI 관련 조작이 가능하게끔 설계
        - 대화 시스템에 따른 대화 UI 출력
        - Json 입출력으로 환경설정 저장
        - 컷씬 만화 출력
        - 로딩화면
- 카메라
    - 플레이어 팔로우 구현
        - 플레이어 외의 다른 오브젝트 팔로우 구현
    - 박스 콜라이더를 사용한 카메라 영역 제한 구현
- 사운드
    - 부드러운 사운드 전환 구현
    - 배경음, 효과음, 환경음 적용
    - 대화 시 보이스 출력
        - NPC마다 개별적인 보이스 출력
        - 특정 글자마다 피치값을 수정하거나, 랜덤으로 출력
- 대화 스크립트 피드백
- Stage_00 레벨디자인
